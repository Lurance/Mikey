{
  "stats": {
    "suites": 2,
    "tests": 7,
    "passes": 7,
    "pending": 0,
    "failures": 0,
    "start": "2018-04-27T11:54:10.592Z",
    "end": "2018-04-27T11:54:10.946Z",
    "duration": 354,
    "testsRegistered": 7,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false,
    "passPercentClass": "success",
    "pendingPercentClass": "danger"
  },
  "suites": {
    "uuid": "11479982-4c8f-4311-8e85-85296837ce59",
    "title": "",
    "fullFile": "",
    "file": "",
    "beforeHooks": [],
    "afterHooks": [],
    "tests": [],
    "suites": [
      {
        "uuid": "2a592670-63f8-463a-8099-3f5a5a6bfaa3",
        "title": "UserModule 鉴权 APIS测试  ",
        "fullFile": "/Users/niangliang/WebstormProjects/Mikey/test/apis/user.test.ts",
        "file": "/test/apis/user.test.ts",
        "beforeHooks": [
          {
            "title": "\"before all\" hook",
            "fullTitle": "UserModule 鉴权 APIS测试   \"before all\" hook",
            "timedOut": false,
            "duration": 24,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        if (yield models_1.User.findOne({ username: environments_1.Environment.defaultUsername }))\n            return;\n        yield new models_1.User({\n            username: environments_1.Environment.defaultUsername,\n            password: environments_1.Environment.defaultPassword,\n            usertype: 1\n        }).save();\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "1f119ca9-c2eb-4d97-9556-8dfb80bb561d",
            "isHook": true,
            "skipped": false
          },
          {
            "title": "\"before each\" hook",
            "fullTitle": "UserModule 鉴权 APIS测试   \"before each\" hook",
            "timedOut": false,
            "duration": 0,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        this.server = yield base_1.app();\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "47d70177-d0d0-4ec6-962a-1874d3b3d7ce",
            "isHook": true,
            "skipped": false
          }
        ],
        "afterHooks": [
          {
            "title": "\"after all\" hook",
            "fullTitle": "UserModule 鉴权 APIS测试   \"after all\" hook",
            "timedOut": false,
            "duration": 2,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        yield models_1.User.remove({ username: environments_1.Environment.defaultUsername });\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "1e1957be-09d5-4ce0-8a59-a628329581e9",
            "isHook": true,
            "skipped": false
          }
        ],
        "tests": [
          {
            "title": "AUTH FOR ADMINISTRATOR BY DEFAULT USERNAME&PASSWORD",
            "fullTitle": "UserModule 鉴权 APIS测试   AUTH FOR ADMINISTRATOR BY DEFAULT USERNAME&PASSWORD",
            "timedOut": false,
            "duration": 46,
            "state": "passed",
            "speed": "medium",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/admin/login')\n            .send({ username: environments_1.Environment.defaultUsername, password: environments_1.Environment.defaultPassword });\n        chai_1.expect(res.status).equal(200);\n        chai_1.expect(res.body).to.have.property('jwt');\n        const payload = jsonwebtoken_1.verify(res.body.jwt.token, environments_1.Environment.jwtsecret);\n        chai_1.expect(payload.username).equal('admin');\n        chai_1.expect(payload.usertype).equal(1);\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "c2dde89d-baa1-42b1-b53e-a4e710dd78ac",
            "isHook": false,
            "skipped": false
          },
          {
            "title": "AUTH FOR ADMINISTRATOR BY WRONG SERNAME&PASSWORD",
            "fullTitle": "UserModule 鉴权 APIS测试   AUTH FOR ADMINISTRATOR BY WRONG SERNAME&PASSWORD",
            "timedOut": false,
            "duration": 4,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/admin/login')\n            .send({ username: 'vnwoen 423 啊啊啊 哈哈 ！#', password: '  3423cckwergpo4jr∫∆ˆˆ≈˚©∫' });\n        chai_1.expect(res.status).equal(401);\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "ad253990-b993-4b4c-9ff8-9db3c38a28ff",
            "isHook": false,
            "skipped": false
          },
          {
            "title": "AUTH FOR CUSTOMER BY WRONG CODE",
            "fullTitle": "UserModule 鉴权 APIS测试   AUTH FOR CUSTOMER BY WRONG CODE",
            "timedOut": false,
            "duration": 227,
            "state": "passed",
            "speed": "slow",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/login')\n            .send({ code: 'cv;qwefkop4opf  的\\'' });\n        chai_1.expect(res.status).equal(401);\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "c155db08-ec7e-489d-8981-fd39cfb19755",
            "isHook": false,
            "skipped": false
          }
        ],
        "suites": [],
        "passes": [
          "c2dde89d-baa1-42b1-b53e-a4e710dd78ac",
          "ad253990-b993-4b4c-9ff8-9db3c38a28ff",
          "c155db08-ec7e-489d-8981-fd39cfb19755"
        ],
        "failures": [],
        "pending": [],
        "skipped": [],
        "duration": 277,
        "root": false,
        "rootEmpty": false,
        "_timeout": 60000
      },
      {
        "uuid": "fe10bad8-f935-4b6b-9e45-a21841119d79",
        "title": "UserModule 好友 APIS测试",
        "fullFile": "/Users/niangliang/WebstormProjects/Mikey/test/apis/user.test.ts",
        "file": "/test/apis/user.test.ts",
        "beforeHooks": [
          {
            "title": "\"before all\" hook",
            "fullTitle": "UserModule 好友 APIS测试 \"before all\" hook",
            "timedOut": false,
            "duration": 6,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        this.testFriendKeys = [];\n        const u1 = yield new models_1.User({\n            username: 'TEST1',\n            usertype: 2,\n        }).save();\n        this.testFriendKeys.push({\n            username: u1.username,\n            friendkey: u1.friendkey,\n            jwt: services_1.UserService.genJWToken(u1),\n            _id: u1._id\n        });\n        const u2 = yield new models_1.User({\n            username: 'TEST2',\n            usertype: 2,\n        }).save();\n        this.testFriendKeys.push({\n            username: u2.username,\n            friendkey: u2.friendkey,\n            jwt: services_1.UserService.genJWToken(u2),\n            _id: u2._id\n        });\n        const u3 = yield new models_1.User({\n            username: 'TEST3',\n            usertype: 2,\n        }).save();\n        this.testFriendKeys.push({\n            username: u3.username,\n            friendkey: u3.friendkey,\n            jwt: services_1.UserService.genJWToken(u3),\n            _id: u3._id\n        });\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "33a99fd3-a13f-4271-b027-c3bf58f7fde1",
            "isHook": true,
            "skipped": false
          },
          {
            "title": "\"before each\" hook",
            "fullTitle": "UserModule 好友 APIS测试 \"before each\" hook",
            "timedOut": false,
            "duration": 0,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        this.server = yield base_1.app();\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "6616d9c2-ca76-41a3-bd29-4d8f7ed3df83",
            "isHook": true,
            "skipped": false
          }
        ],
        "afterHooks": [
          {
            "title": "\"after all\" hook",
            "fullTitle": "UserModule 好友 APIS测试 \"after all\" hook",
            "timedOut": false,
            "duration": 1,
            "pass": false,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        yield models_1.User.remove({ username: { $in: [\"TEST1\", \"TEST2\", \"TEST3\"] } });\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "25f6ef83-74d0-42aa-ae42-c1274f5a49bd",
            "isHook": true,
            "skipped": false
          }
        ],
        "tests": [
          {
            "title": "ADD FRIEND TEST1 FRIEND WITH 2",
            "fullTitle": "UserModule 好友 APIS测试 ADD FRIEND TEST1 FRIEND WITH 2",
            "timedOut": false,
            "duration": 10,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/user/friend')\n            .set('Authorization', `Bearer ${this.testFriendKeys.find(v => v.username === 'TEST1').jwt.token}`)\n            .send({ friendkey: this.testFriendKeys.find(v => v.username === \"TEST2\").friendkey });\n        chai_1.expect(res.status).equal(200);\n        chai_1.expect(res.body.username).equal('TEST2');\n        chai_1.expect(res.body._id).equal(String(this.testFriendKeys.find(v => v.username === 'TEST2')._id));\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "5ef0607e-e2e6-48ad-8afe-96149b43d8ab",
            "isHook": false,
            "skipped": false
          },
          {
            "title": "ADD FRIEND TEST1 FRIEND WITH 3",
            "fullTitle": "UserModule 好友 APIS测试 ADD FRIEND TEST1 FRIEND WITH 3",
            "timedOut": false,
            "duration": 6,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/user/friend')\n            .set('Authorization', `Bearer ${this.testFriendKeys.find(v => v.username === 'TEST1').jwt.token}`)\n            .send({ friendkey: this.testFriendKeys.find(v => v.username === \"TEST3\").friendkey });\n        chai_1.expect(res.status).equal(200);\n        chai_1.expect(res.body.username).equal('TEST3');\n        chai_1.expect(res.body._id).equal(String(this.testFriendKeys.find(v => v.username === 'TEST3')._id));\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "76efd079-8944-4b0d-b9f3-90def45e9b2c",
            "isHook": false,
            "skipped": false
          },
          {
            "title": "ADD FRIEND TEST1 FRIEND WITH 2 ANAIN",
            "fullTitle": "UserModule 好友 APIS测试 ADD FRIEND TEST1 FRIEND WITH 2 ANAIN",
            "timedOut": false,
            "duration": 3,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/user/friend')\n            .set('Authorization', `Bearer ${this.testFriendKeys.find(v => v.username === 'TEST1').jwt.token}`)\n            .send({ friendkey: this.testFriendKeys.find(v => v.username === \"TEST2\").friendkey });\n        chai_1.expect(res.status).equal(400);\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "4bace68c-695e-4aeb-8c6c-3bd7894f7418",
            "isHook": false,
            "skipped": false
          },
          {
            "title": "ADD FRIEND TEST2 FRIEND WITH 1",
            "fullTitle": "UserModule 好友 APIS测试 ADD FRIEND TEST2 FRIEND WITH 1",
            "timedOut": false,
            "duration": 4,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "__awaiter(this, void 0, void 0, function* () {\n        const res = yield this.server.post('/api/v1/user/friend')\n            .set('Authorization', `Bearer ${this.testFriendKeys.find(v => v.username === 'TEST2').jwt.token}`)\n            .send({ friendkey: this.testFriendKeys.find(v => v.username === \"TEST1\").friendkey });\n        chai_1.expect(res.status).equal(400);\n    })",
            "err": {},
            "isRoot": false,
            "uuid": "3a48ba3b-a536-4401-8d57-8521a2923e6e",
            "isHook": false,
            "skipped": false
          }
        ],
        "suites": [],
        "passes": [
          "5ef0607e-e2e6-48ad-8afe-96149b43d8ab",
          "76efd079-8944-4b0d-b9f3-90def45e9b2c",
          "4bace68c-695e-4aeb-8c6c-3bd7894f7418",
          "3a48ba3b-a536-4401-8d57-8521a2923e6e"
        ],
        "failures": [],
        "pending": [],
        "skipped": [],
        "duration": 23,
        "root": false,
        "rootEmpty": false,
        "_timeout": 60000
      }
    ],
    "passes": [],
    "failures": [],
    "pending": [],
    "skipped": [],
    "duration": 0,
    "root": true,
    "rootEmpty": true,
    "_timeout": 60000
  },
  "copyrightYear": 2018
}